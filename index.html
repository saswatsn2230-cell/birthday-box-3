<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For You ðŸ’—</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* -----------------------------------------------------
   GLOBAL STYLE
----------------------------------------------------- */
body {
    margin: 0;
    background: #ffeaf4;
    font-family: "Poppins", sans-serif;
    text-align: center;
    overflow-x: hidden;
    color: #d6337d;
}

h1 {
    margin-top: 40px;
    color: #d6337d;
    font-weight: 600;
}

button {
    padding: 15px 30px;
    background: #ff8fb7;
    border: none;
    border-radius: 12px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    margin-top: 40px;
    font-weight: bold;
    box-shadow: 0 0 18px rgba(255, 140, 180, 0.45);
}

/* -----------------------------------------------------
   CONTAINER + BOX POSITIONING
----------------------------------------------------- */
#explosionBox {
    margin: auto;
    width: 260px;
    height: 260px;
    margin-top: 35vh;   /* âœ” FIXED â€“ moved lower / centered */
    position: relative;
    display: none;
}

/* -----------------------------------------------------
   BOX (CENTER)
----------------------------------------------------- */
#centerBox {
    width: 180px;
    height: 180px;
    background: #ffbcd4;
    border-radius: 12px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    box-shadow: 0 0 25px rgba(255, 140, 180, 0.35);
}

/* -----------------------------------------------------
   LID (flies away softly)
----------------------------------------------------- */
#lid {
    width: 200px;
    height: 40px;
    background: #ff8fb7;
    border-radius: 10px;
    position: absolute;
    top: calc(50% - 100px);
    left: 50%;
    transform: translateX(-50%);
    transform-origin: center bottom;
    transition: transform 1.8s ease;
    z-index: 3;
}

/* -----------------------------------------------------
   4 FLAPS (top, bottom, left, right)
----------------------------------------------------- */
.flap {
    width: 180px;
    height: 180px;
    background: #fff1f7;
    border: 3px solid #ff8fb7;
    border-radius: 14px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform-origin: center top;
    transform: translate(-50%, -50%) rotateX(90deg);
    transition: transform 2s ease;
    padding: 18px;
    box-sizing: border-box;
    color: #d6337d;
    font-size: 14px;
    font-weight: 500;
}

.topFlap { transform-origin: center bottom; }
.leftFlap { transform-origin: right center; }
.rightFlap { transform-origin: left center; }
.bottomFlap { transform-origin: center top; }

/* -----------------------------------------------------
   CENTER IMAGE
----------------------------------------------------- */
#centerImg {
    width: 150px;
    height: 150px;
    border-radius: 14px;
    object-fit: cover;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border: 3px solid #ff8fb7;
    opacity: 0;
    transition: opacity 1.5s ease;
    z-index: 5;
}

/* -----------------------------------------------------
   NEXT BUTTON
----------------------------------------------------- */
#nextBtn {
    position: absolute;
    top: calc(50% + 120px);
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 25px;
    background: #ff8fb7;
    border-radius: 12px;
    color: white;
    font-size: 16px;
    cursor: pointer;
    opacity: 0;
    transition: opacity 1.4s ease;
    z-index: 10;
}

/* -----------------------------------------------------
   FINAL MESSAGE
----------------------------------------------------- */
#finalMessage {
    display: none;
    margin-top: 80px;
    font-size: 30px;
    color: #d6337d;
    font-weight: bold;
}
</style>
</head>

<body>

<!-- âœ” FIXED: Added id="bgm" for mobile audio -->
<audio id="bgm" loop>
 <source src="song.mp3" type="audio/mpeg">
</audio>

<h1>ðŸ’— A Surprise For You ðŸ’—</h1>
<button onclick="startBox()">Open My Surprise</button>

<!-- Main Explosion Box Structure -->
<div id="explosionBox">

    <div id="lid"></div>

    <div id="centerBox"></div>

    <div id="topFlap" class="flap topFlap"></div>
    <div id="bottomFlap" class="flap bottomFlap"></div>
    <div id="leftFlap" class="flap leftFlap"></div>
    <div id="rightFlap" class="flap rightFlap"></div>

    <img id="centerImg">

    <div id="nextBtn" onclick="nextLayer()">Next</div>
</div>

<div id="finalMessage">ðŸ’– Happy Birthday My Love ðŸ’–</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
/* -----------------------------------------------------
   LAYER DATA
----------------------------------------------------- */
const layers = [
    {
        img: "layer1.jpg",
        lines: [
            "You make my world softer just by existing.",
            "I never believed in â€œperfectâ€ until I met you.",
            "My life got brighter the moment you walked into it.",
            "Youâ€™re the best part of every day I live."
        ]
    },
    {
        img: "layer2.jpg",
        lines: [
            "Youâ€™re the reason my heart beats a little faster.",
            "I wish you could see yourself the way I see you.",
            "Your smile is my daily source of happiness.",
            "I see the mother of my 2 children in you."
        ]
    },
    {
        img: "layer3.jpg",
        lines: [
            "Youâ€™re my favorite notification.",
            "I could look at you forever and still feel itâ€™s not enough.",
            "You make distance feel small and love feel big.",
            "Youâ€™re the warmth in my cold days."
        ]
    },
    {
        img: "layer4.jpg",
        lines: [
            "Distance means nothing because youâ€™re worth everything.",
            "Even far away, youâ€™re the closest to my heart.",
            "Every mile between us is a reminder of how strong we are.",
            "I miss you in ways words canâ€™t explain."
        ]
    },
    {
        img: "layer5.jpg",
        lines: [
            "Youâ€™re the poem my heart has been trying to write.",
            "Youâ€™re the peace in my chaos.",
            "Your love feels like a place I never want to leave.",
            "Youâ€™re the spark that makes my heart glow."
        ]
    },
    {
        img: "layer6.jpg",
        lines: [
            "You increase the opacity of my happiness by just existing.",
            "For you I can do multiple revisions to get life better.",
            "No transition could ever match how smoothly you entered my world.",
            "You turned my messy timeline into a beautifully edited story."
        ]
    }
];

let current = 0;

/* -----------------------------------------------------
   START SEQUENCE
----------------------------------------------------- */
function startBox() {
    document.querySelector("button").style.display = "none";
    document.getElementById("explosionBox").style.display = "block";

    /* âœ” FIXED: Play audio on user tap (mobile allows this) */
    const audio = document.getElementById("bgm");
    audio.play().catch(()=>{});

    // Soft lid pop
    setTimeout(() => {
        document.getElementById("lid").style.transform = "translateX(-50%) rotateX(120deg)";
    }, 800);

    // Open flaps softly
    setTimeout(openFlaps, 2000);
}

/* -----------------------------------------------------
   OPEN FLAPS
----------------------------------------------------- */
function openFlaps() {
    const data = layers[current];

    document.getElementById("topFlap").innerHTML = data.lines[0];
    document.getElementById("bottomFlap").innerHTML = data.lines[1];
    document.getElementById("leftFlap").innerHTML = data.lines[2];
    document.getElementById("rightFlap").innerHTML = data.lines[3];

    /* âœ” FIXED: top flap moved DOWN for mobile visibility */
    document.getElementById("topFlap").style.transform = "translate(-50%, -130%) rotateX(0deg)";
    document.getElementById("bottomFlap").style.transform = "translate(-50%, 80%) rotateX(0deg)";
    document.getElementById("leftFlap").style.transform = "translate(-180%, -50%) rotateY(0deg)";
    document.getElementById("rightFlap").style.transform = "translate(80%, -50%) rotateY(0deg)";

    let img = document.getElementById("centerImg");
    img.src = layers[current].img;

    setTimeout(() => {
        img.style.opacity = 1;
        document.getElementById("nextBtn").style.opacity = 1;
    }, 1800);
}

/* -----------------------------------------------------
   NEXT LAYER
----------------------------------------------------- */
function nextLayer() {
    current++;

    if (current >= layers.length) return finishBox();

    resetFlaps();

    setTimeout(() => {
        openFlaps();
    }, 1400);
}

/* -----------------------------------------------------
   RESET FLAPS
----------------------------------------------------- */
function resetFlaps() {
    document.getElementById("centerImg").style.opacity = 0;
    document.getElementById("nextBtn").style.opacity = 0;

    document.getElementById("topFlap").style.transform = "translate(-50%, -50%) rotateX(90deg)";
    document.getElementById("bottomFlap").style.transform = "translate(-50%, -50%) rotateX(90deg)";
    document.getElementById("leftFlap").style.transform = "translate(-50%, -50%) rotateY(90deg)";
    document.getElementById("rightFlap").style.transform = "translate(-50%, -50%) rotateY(90deg)";
}

/* -----------------------------------------------------
   FINISH SEQUENCE
----------------------------------------------------- */
function finishBox() {
    document.getElementById("explosionBox").style.display = "none";
    document.getElementById("finalMessage").style.display = "block";

    confetti({
        particleCount: 500,
        spread: 120
    });
}
</script>

</body>
</html>
